# سیستم تیکت پنل ادمین

## مقدمه

این سیستم تیکت برای مدیریت درخواست‌های کاربران در پنل ادمین Filament طراحی شده است. سیستم از پکیج Laravel Ticket استفاده می‌کند و قابلیت‌های زیر را فراهم می‌کند:

## قابلیت‌ها

### 1. مدیریت تیکت‌ها (TicketResource)
- مشاهده لیست تمام تیکت‌ها
- ایجاد تیکت جدید
- ویرایش تیکت موجود
- مشاهده جزئیات تیکت
- پاسخ به تیکت
- تغییر وضعیت تیکت
- اختصاص تیکت به کاربر خاص
- فیلتر کردن بر اساس وضعیت، اولویت و کاربر اختصاص داده شده

### 2. مدیریت پیام‌ها (MessageResource)
- مشاهده لیست تمام پیام‌های تیکت‌ها
- ایجاد پیام جدید
- ویرایش پیام موجود
- مشاهده جزئیات پیام
- فیلتر کردن بر اساس وضعیت تیکت و کاربر

### 3. Widget های داشبورد
- **TicketStatsWidget**: نمایش آمار کلی تیکت‌ها
- **LatestTicketsWidget**: نمایش آخرین تیکت‌ها

## نصب و راه‌اندازی

### 1. نصب پکیج Laravel Ticket
```bash
composer require coderflex/laravel-ticket
```

### 2. انتشار فایل‌های پکیج
```bash
php artisan vendor:publish --provider="Coderflex\LaravelTicket\LaravelTicketServiceProvider"
```

### 3. اجرای migration ها
```bash
php artisan migrate
```

### 4. اضافه کردن trait به مدل User
```php
use Coderflex\LaravelTicket\Concerns\HasTickets;

class User extends Authenticatable
{
    use HasTickets;
    // ...
}
```

## ساختار فایل‌ها

### Resource ها
- `app/Filament/Resources/TicketResource.php` - مدیریت تیکت‌ها
- `app/Filament/Resources/MessageResource.php` - مدیریت پیام‌ها

### صفحات Resource
- `app/Filament/Resources/TicketResource/Pages/` - صفحات مربوط به تیکت
- `app/Filament/Resources/MessageResource/Pages/` - صفحات مربوط به پیام

### Widget ها
- `app/Filament/Widgets/TicketStatsWidget.php` - آمار تیکت‌ها
- `app/Filament/Widgets/LatestTicketsWidget.php` - آخرین تیکت‌ها

### مدل‌ها
- `app/Models/Ticket.php` - مدل تیکت با قابلیت‌های پیشرفته
- `app/Models/User.php` - مدل کاربر با trait HasTickets

## نحوه استفاده

### 1. مشاهده تیکت‌ها
- به پنل ادمین بروید
- از منوی "تیکت‌ها" استفاده کنید
- لیست تمام تیکت‌ها را مشاهده کنید

### 2. پاسخ به تیکت
- روی دکمه "پاسخ" کلیک کنید
- پیام پاسخ خود را وارد کنید
- فایل‌های پیوست اضافه کنید (اختیاری)
- پاسخ را ارسال کنید

### 3. تغییر وضعیت تیکت
- روی دکمه "تغییر وضعیت" کلیک کنید
- وضعیت جدید را انتخاب کنید
- تغییرات را اعمال کنید

### 4. اختصاص تیکت
- روی دکمه "اختصاص تیکت" کلیک کنید
- کاربر مورد نظر را انتخاب کنید
- تیکت را اختصاص دهید

## وضعیت‌های تیکت

- **باز (open)**: تیکت جدید که هنوز پاسخ داده نشده
- **در حال بررسی (in_progress)**: تیکت در حال بررسی توسط ادمین
- **حل شده (resolved)**: تیکت حل شده
- **بسته (closed)**: تیکت بسته شده

## اولویت‌های تیکت

- **کم (low)**: اولویت پایین
- **متوسط (medium)**: اولویت متوسط
- **زیاد (high)**: اولویت بالا
- **فوری (urgent)**: اولویت بسیار بالا

## فایل‌های پیوست

سیستم از Spatie Media Library برای مدیریت فایل‌های پیوست استفاده می‌کند:
- پشتیبانی از تصاویر، PDF و فایل‌های متنی
- حداکثر اندازه فایل: 10MB
- ذخیره در پوشه `storage/app/public/tickets`

## سفارشی‌سازی

### تغییر رنگ‌ها
در فایل‌های Resource می‌توانید رنگ‌های badges و status ها را تغییر دهید.

### اضافه کردن فیلدهای جدید
برای اضافه کردن فیلدهای جدید به تیکت، migration جدید ایجاد کنید و فیلد را به مدل Ticket اضافه کنید.

### تغییر متن‌ها
تمام متن‌های فارسی در فایل‌های Resource قابل تغییر هستند.

## نکات مهم

1. **امنیت**: فقط کاربران با نقش ادمین می‌توانند به این بخش دسترسی داشته باشند
2. **نوتیفیکیشن**: تمام عملیات با نوتیفیکیشن مناسب همراه هستند
3. **تاریخچه**: تمام تغییرات در تاریخچه تیکت ثبت می‌شوند
4. **فایل‌ها**: فایل‌های پیوست به صورت امن ذخیره می‌شوند

## عیب‌یابی

### مشکل در نمایش تیکت‌ها
- بررسی کنید که migration ها اجرا شده باشند
- بررسی کنید که مدل Ticket درست تعریف شده باشد

### مشکل در آپلود فایل
- بررسی کنید که storage link ایجاد شده باشد
- بررسی کنید که پوشه storage قابل نوشتن باشد

### مشکل در نمایش Widget ها
- بررسی کنید که Widget ها در AdminPanelProvider ثبت شده باشند
- بررسی کنید که فایل‌های Widget درست ایجاد شده باشند

## پشتیبانی

برای سوالات و مشکلات، لطفاً با تیم توسعه تماس بگیرید.
